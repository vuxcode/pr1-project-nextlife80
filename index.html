<!--to use the "dark" color scheme by default-->
<meta name="color-scheme" content="dark">

<!--The <title> tag in HTML specifies the title of the webpage.-->
<title>The Hangman Game</title>

<!--To change the font size of Paragraphs by use P{} and the Heading by use h1{} in the style tag-->
<style>
  p {
    font-size: 20px;
  }

  h1 {
    font-size: 45px;
    text-align: center;
  }



  /* style for the HTML element with the ID "startProgram".*/
  #key {
    width: 50px;
    height: 20px;
    color: rgb(9, 9, 8);
    background-color: rgba(232, 241, 236, 0.744);
    border: 2px solid rgb(23, 181, 14);
    border-radius: 50px;
    cursor: pointer;
    position: relative;
    /* left: 600px; */

  }

  /* style for the HTML element with the ID "startProgram".*/
  #startProgram {
    width: 150px;
    height: 40px;
    color: chartreuse;
    background-color: black;
    border: 2px solid chartreuse;
    border-radius: 50px;
    cursor: pointer;
  }



  /* The hidden(class) defines as "none display"*/
  .hidden {
    display: none;
  }

  .property {
    font-size: 20px;
    height: 40;
  }

  main {
    display: flex;
    justify-content: space-around;
  }

  .controls {
    position: relative;
    top: 50px;
  }

  #message1, #message7, #message8 {
    font-size: 20px;
    height: 40;
  }
</style>

<main>
  <div>
    <!--Showing the title-->
    <h1>The Hangman Game</h1>

    <!--To write the Game descriptions with <p> tag-->
    <!--To use the <br> tag to start a new line-->
    <p>
      * The game picks one fruit name.<br>
      * You have 5 opportunities to guess the letters in the word.<br>
      * If you guess all the letters in the word you win, otherwise you lose.<br><br>
      Push the START button to start the game<br>
    </p>

    <!--Add a button tag to start the game-->
    <button id="startProgram">START</button>
  </div>
  <div class="controls">
    <!--The space for users' input-->
    <input type="text" id="input1" class="hidden">

    <!--Create a container by id "alphabetContainer" -->
    <div id="alphabetContainer"></div>

    <!--Create containers for all messages -->
    <div id="message1"></div>
    <div id="message2" class="property"></div>
    <div id="message3" class="property"></div>
    <div id="message4" class="property"></div>
    <div id="message5" class="property"></div>
    <div id="message6" class="property"></div>
    <div id="message7" class=></div>
    <div id="message8" class=></div>

    <!--Add the buttons for alphabets-->
    <button id="key" onclick="processLetter('A')">A</button>
    <button id="key" onclick="processLetter('B')">B</button>
    <button id="key" onclick="processLetter('C')">C</button>
    <button id="key" onclick="processLetter('D')">D</button>
    <button id="key" onclick="processLetter('E')">E</button>
    <button id="key" onclick="processLetter('F')">F</button>
    <button id="key" onclick="processLetter('G')">G</button>
    <button id="key" onclick="processLetter('H')">H</button>
    <button id="key" onclick="processLetter('I')">I</button>
    <button id="key" onclick="processLetter('J')">J</button>
    <br />
    <button id="key" onclick="processLetter('K')">K</button>
    <button id="key" onclick="processLetter('L')">L</button>
    <button id="key" onclick="processLetter('M')">M</button>
    <button id="key" onclick="processLetter('N')">N</button>
    <button id="key" onclick="processLetter('O')">O</button>
    <button id="key" onclick="processLetter('P')">P</button>
    <button id="key" onclick="processLetter('Q')">Q</button>
    <button id="key" onclick="processLetter('R')">R</button>
    <button id="key" onclick="processLetter('S')">S</button>
    <button id="key" onclick="processLetter('T')">T</button>
    <br />
    <button id="key" onclick="processLetter('U')">U</button>
    <button id="key" onclick="processLetter('V')">V</button>
    <button id="key" onclick="processLetter('W')">W</button>
    <button id="key" onclick="processLetter('X')">X</button>
    <button id="key" onclick="processLetter('Y')">Y</button>
    <button id="key" onclick="processLetter('Z')">Z</button>
  </div>
</main>
<!--The rest of the code by JS-->
<script>

  // Create an array contains the words.
  var words = ["apple", "orange", "pear", "cherry",
    "strawberry", "nectarine", "grape", "mango", "blueberry",
    "pomegranate", "plum", "banana", "raspberry", "mandarin",
    "papaya", "kiwi", "pineapple", "lime", "lemon", "apricot",
    "grapefruit", "melon", "coconut", "avocado", "peach", "cucumber",
    "fig", "dragon", "kiwi", "garlic", "tomato", "potato", "lettuce", "onion"];

  // Create an array of all alphabets
  var alphabets = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k",
    "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];

  // Create a variable to find the button element in the program
  var startButton = document.getElementById("startProgram");

  // Create a variable to find the button element in the program
  var key = document.getElementById("key");

  // Add a function to reload the game 
  function reload() {
    location.reload()
  }

  // Add the click event to the button to start a new game
  startButton.addEventListener("click", reload);

  // Find the "input1" element
  var input = document.getElementById("input1");

  // Retrieves HTML elements with id attributes and assigns they to the variables.
  var message1 = document.getElementById("message1");
  var message2 = document.getElementById("message2");
  var message3 = document.getElementById("message3");
  var message4 = document.getElementById("message4");
  var message5 = document.getElementById("message5");
  var message6 = document.getElementById("message6");
  var message7 = document.getElementById("message7");
  var message8 = document.getElementById("message8");


  // Get the container for alphabet buttons
  var alphabetContainer = document.getElementById("alphabetContainer");

  // The player don't play before click on Game button.
  var inplay = false;


  var guessLetter = [];


  // The player click on the game button to play
  inplay = true;

  //It toggles the "hidden" class on the input element and the key
  //input.classList.toggle("hidden");
  //key.classList.toggle("hidden");

  // Inputs an index From the product of Math.(random) and words.length in the variable randomIndex.
  // The Math.floor function rounds the input number down to the next nearest integer.
  var randomIndex = Math.floor(Math.random() * words.length);

  // Inputs randomly a word from the array words[] in randomWord.
  var randomWord = words[randomIndex];

  // Split the word into characters
  var characters = randomWord.split("");// e.g. Â ['a', 'p', 'r', 'i', 'c', 'o', 't']

  // TEST temporarily  
  console.log(characters);

  // create a variable include the lifetime value
  var life = 5;

  // create an Array to list the letters from user


  // Create an array with freespace as long as the letters of the word and then split it.
  var freeSpace = "_".repeat(characters.length).split("");

  message2.textContent = freeSpace;

  // Create a variable for the place of the letter.
  var place

  // Update the content of the div
  message1.textContent = "Guess one letter of the chosen fruit or vegetable name";

  // Add a function to process the letter 
  function processLetter(letter) {
    letter = letter.toLowerCase();
    console.log(letter)
    // Input a letter by user, and all the characters converted to lowercase.
    // var letter = prompt("Guess one letter of the chosen fruit or vegetable name:").toLowerCase();

    // Add the letters in array list
    guessLetter.push(letter)

    // Show to user the letters he had guessed
    message4.textContent = "The letters that you have guessed: " + guessLetter;

    for (i = 0; i < characters.length; i++) {

      // If the letter is found in the word.
      if (characters[i] == letter) {

        // To find the right place of the letter in the word
        place = i + 1

        // The .indexOf() method is used to find the index of a specific letter in the characters array.
        //var index = characters.indexOf(letter)+1;

        // Tell to user that the word was found
        message3.textContent = "Letter " + letter + " founded: " + letter + " is in the place: " + place;

        // update the right letter in the right free space in the array freeSpace.
        freeSpace[i] = letter;
      }
    }
    message5.textContent = freeSpace;


    // Otherwise the word was not found
    if (characters.includes(letter) === false) {

      // Reduce the life
      life--;

      // Give the output to the user
      message6.textContent = letter + " NOT FOUND! " + "The remaining life: " + life;
    }

    // If the life amount becomes 0. 
    if (life == 0) {

      //  Give the message of losing. Breaking the functon and the game.
      message7.textContent = "Sorry, you couldn't guess the right word. Click on START for a new game ";


      // The join() is used to join all elements of an array into a string. 
      // If characters elements is equals to freeSpace elements, show to user that he had won, and break the program.
    } else if (characters.join('') === freeSpace.join('')) {
      message8.textContent = "Congratulations, you guessed the word: " + characters.join('')+" Click on START for a new game";
      return;
    }
  }
</script>